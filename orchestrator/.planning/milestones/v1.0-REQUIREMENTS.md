# Requirements Archive: v1.0 Elmer Workspace Onboarding

**Archived:** 2026-01-27
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (will be created for next milestone).

---

# Requirements: Elmer Workspace Onboarding

**Defined:** 2026-01-25
**Core Value:** When you create a workspace, Elmer automatically discovers and populates your existing work from GitHub

## v1 Requirements

Requirements for v1.0 release. All 76 requirements delivered and verified.

### Onboarding Foundation

- [x] **FOUND-01**: User sees progress indicator showing current step and completion percentage
- [x] **FOUND-02**: User can skip optional configuration steps with "Skip" or "I'll do this later" button
- [x] **FOUND-03**: User sees clear error messages with actionable resolution paths and retry buttons
- [x] **FOUND-04**: System auto-detects sensible defaults (main branch, common folder paths) rather than showing empty forms
- [x] **FOUND-05**: Wizard state persists across page refreshes during onboarding (sessionStorage)

### Repository Connection

- [x] **REPO-01**: User authenticates with GitHub via OAuth with one click
- [x] **REPO-02**: User selects repository from searchable list with org/repo filtering
- [x] **REPO-03**: User selects which branch to scan for workspace structure
- [x] **REPO-04**: System validates user has sufficient GitHub permissions (repo scope)
- [x] **REPO-05**: System checks GitHub API rate limits before starting discovery

### Structure Discovery

- [x] **DISC-01**: System scans repo for folder patterns (initiatives/, features/, projects/, work/, epics/)
- [x] **DISC-02**: System ranks discovered folders by confidence (exact match > plural match > nested match)
- [x] **DISC-03**: System detects context paths (knowledge base, personas, signals folders)
- [x] **DISC-04**: System detects prototype paths including submodule locations
- [x] **DISC-05**: System parses _meta.json files with permissive schema and fallback defaults
- [x] **DISC-06**: System maps status fields to Kanban columns with fuzzy matching
- [x] **DISC-07**: System detects .cursor/ directory and AGENTS.md configuration
- [x] **DISC-08**: System handles missing or malformed _meta.json gracefully
- [x] **DISC-09**: System generates deterministic IDs (hash of workspaceId + repoPath + initiativePath) for idempotency

### Real-time Feedback

- [x] **FEED-01**: User sees live progress updates via SSE streaming ("Scanning... Found initiatives/ ... Analyzing 15 folders...")
- [x] **FEED-02**: User sees discovered items appear incrementally as they're found
- [x] **FEED-03**: User sees elapsed time and estimated time remaining during discovery
- [x] **FEED-04**: User can cancel long-running discovery operations
- [x] **FEED-05**: System shows granular progress ("Analyzing folder 23 of 50...")

### Visual Mapping & Preview

- [x] **PREV-01**: User sees visual mapping preview showing "initiatives/feature-a -> Project 'Feature A' in Discovery stage"
- [x] **PREV-02**: User sees complete list of discovered initiatives with their inferred status/column
- [x] **PREV-03**: User sees validation summary ("This will create 12 projects, sync 24 knowledge docs, import 5 personas")
- [x] **PREV-04**: User sees which .cursor/ commands and agents will be imported
- [x] **PREV-05**: User reviews confirmation screen before workspace is populated

### Selective Import

- [x] **IMPRT-01**: User can select/deselect individual discovered initiatives via checkboxes
- [x] **IMPRT-02**: User can bulk select/deselect with "Select all" / "Deselect all" actions
- [x] **IMPRT-03**: User can filter discovered items (e.g., "Deselect archived" or "Only active")
- [x] **IMPRT-04**: Default behavior is all items selected with ability to deselect
- [x] **IMPRT-05**: User can skip entire import step for manual configuration later

### Agent Architecture

- [x] **AGENT-01**: System detects .cursor/ directory structure
- [x] **AGENT-02**: System parses AGENTS.md to extract agent definitions
- [x] **AGENT-03**: System detects commands defined in workspace
- [x] **AGENT-04**: System detects rules and skills portfolio
- [x] **AGENT-05**: User reviews and selectively imports detected agents/commands
- [x] **AGENT-06**: Imported agents are configured and ready to execute in workspace

### Conversational Discovery

- [x] **CONV-01**: When structure is ambiguous, system asks clarifying questions ("I found /features/ and /work/. Which contains your initiatives?")
- [x] **CONV-02**: User answers questions in chat-like interface extending existing ChatSidebar pattern
- [x] **CONV-03**: System adapts discovery based on user responses
- [x] **CONV-04**: Conversation flow is deterministic based on repo structure, not AI-generated
- [x] **CONV-05**: User can go back to previous questions to revise answers

### Submodule Support

- [x] **SUBM-01**: System detects Git submodules via .gitmodules file
- [x] **SUBM-02**: System scans submodules for prototype paths and additional initiatives
- [x] **SUBM-03**: User sees submodule structure in visual preview ("elephant-ai/web/src/components/prototypes/")
- [x] **SUBM-04**: System configures workspace to handle prototype generation in submodule paths
- [x] **SUBM-05**: System handles submodules that require separate authentication

### Workspace Population

- [x] **POPUL-01**: System creates project records in database from discovered initiatives
- [x] **POPUL-02**: Projects are assigned to correct Kanban columns based on status mapping
- [x] **POPUL-03**: System triggers knowledge base sync from detected context path
- [x] **POPUL-04**: System maps personas from detected personas path
- [x] **POPUL-05**: System maps signals from detected signals path
- [x] **POPUL-06**: System handles duplicate detection using deterministic IDs (upsert, not insert)
- [x] **POPUL-07**: If re-onboarding, system warns and offers "Merge" or "Replace" options

### Settings Migration

- [x] **SETTNG-01**: Settings page no longer shows initial setup fields (repo selection, context paths)
- [x] **SETTNG-02**: Settings page becomes "edit mode" for post-onboarding adjustments
- [x] **SETTNG-03**: User can re-run discovery from settings to sync new initiatives
- [x] **SETTNG-04**: Settings page maintains existing advanced configuration options

### GitHub Writeback

- [x] **WRITE-01**: When user creates a PRD, system commits it to GitHub repo at configured path with atomic commit
- [x] **WRITE-02**: When user creates a prototype, system commits it to repo (including submodule paths) with atomic commit
- [x] **WRITE-03**: When user updates initiative documents, system commits changes to GitHub with descriptive message
- [x] **WRITE-04**: System uses atomic commit pattern: small, focused commits with clear messages
- [x] **WRITE-05**: All work created in Elmer appears in GitHub repo, not just in Elmer database
- [x] **WRITE-06**: Atomic commits are linked to the project/card that triggered them
- [x] **WRITE-07**: User can see commit history for each project showing all Elmer-generated commits

### Agents Management UI

- [x] **AGUI-01**: User can navigate to Agents page via hamburger menu
- [x] **AGUI-02**: Agents page shows list of all detected/imported agents with their descriptions
- [x] **AGUI-03**: Each agent displays: skills it uses, work it can do, jobs it can run
- [x] **AGUI-04**: User can select projects or signals as context and execute agents from this page
- [x] **AGUI-05**: User can see execution history for each agent
- [x] **AGUI-06**: User can enable/disable individual agents or commands

### Column Automation

- [x] **AUTO-01**: Each Kanban column has configurable automation rules
- [x] **AUTO-02**: When project is dragged to column, configured auto-runs execute automatically
- [x] **AUTO-03**: Automation configuration is based on pm-workspace patterns (from .cursor/ or column config)
- [x] **AUTO-04**: User can view and edit which agents/automations run for each column
- [x] **AUTO-05**: System prevents infinite loops (project moving triggers automation that moves project again)
- [x] **AUTO-06**: User sees automation execution status and results inline on project card

### Post-Onboarding Tour

- [x] **TOUR-01**: After onboarding completes, user sees optional "Take a Tour" prompt
- [x] **TOUR-02**: Tour shows how components work together (projects, knowledge base, personas, signals, agents)
- [x] **TOUR-03**: Tour shows where work is created (GitHub repo paths)
- [x] **TOUR-04**: User can skip tour or dismiss individual tour steps
- [x] **TOUR-05**: User can restart tour from help menu

## v2 Requirements

Deferred to future release.

### Template Generation

- **TMPL-01**: When repo has no pm-workspace structure, system offers template generation
- **TMPL-02**: System creates genericized pm-workspace folder structure in user's repo
- **TMPL-03**: User answers questions to populate template context (company name, product, goals)
- **TMPL-04**: System optionally researches company URL to auto-generate company context
- **TMPL-05**: System commits template structure to user's GitHub repo
- **TMPL-06**: Generated template includes initiatives/, personas/, signals/, pm-workspace-docs/ folders
- **TMPL-07**: Generated template includes .cursor/ with example AGENTS.md, commands, rules, skills

### Advanced Analysis

- **ADVN-01**: Monorepo detection and workspace selection
- **ADVN-02**: Deep submodule recursion (nested submodules)
- **ADVN-03**: Cross-repo initiative linking

### Enhanced Intelligence

- **INTL-01**: AI-powered folder detection (beyond pattern matching)
- **INTL-02**: Automatic status inference from commit history
- **INTL-03**: Suggest initiative relationships based on content similarity

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Multi-repo workspaces | One workspace = one repo model. Complexity not justified by user demand. |
| Non-GitHub VCS (GitLab, Bitbucket) | GitHub OAuth and API already integrated. Other platforms require separate auth flows. |
| Elmer-native storage separate from repo | Explicitly rejected—all work must live in GitHub repo, not Elmer database. |
| Arbitrary folder structure flexibility | Opinionated scaffolding based on pm-workspace. Users without structure get template. |
| Manual folder mapping UI | Auto-discovery with conversational fallback. No drag-and-drop "map this folder to that concept." |
| AI-generated onboarding questions | Questions are deterministic based on repo structure. No LLM required for Q&A flow. |

## Traceability

All v1.0 requirements mapped and delivered across 6 phases.

| Requirement | Phase | Status |
|-------------|-------|--------|
| FOUND-01 | Phase 1 | Complete |
| FOUND-02 | Phase 1 | Complete |
| FOUND-03 | Phase 1 | Complete |
| FOUND-04 | Phase 1 | Complete |
| FOUND-05 | Phase 1 | Complete |
| REPO-01 | Phase 1 | Complete |
| REPO-02 | Phase 1 | Complete |
| REPO-03 | Phase 1 | Complete |
| REPO-04 | Phase 1 | Complete |
| REPO-05 | Phase 1 | Complete |
| SETTNG-01 | Phase 1 | Complete |
| SETTNG-02 | Phase 1 | Complete |
| SETTNG-03 | Phase 1 | Complete |
| SETTNG-04 | Phase 1 | Complete |
| TOUR-01 | Phase 1 | Complete |
| TOUR-02 | Phase 1 | Complete |
| TOUR-03 | Phase 1 | Complete |
| TOUR-04 | Phase 1 | Complete |
| TOUR-05 | Phase 1 | Complete |
| DISC-01 | Phase 2 | Complete |
| DISC-02 | Phase 2 | Complete |
| DISC-03 | Phase 2 | Complete |
| DISC-04 | Phase 2 | Complete |
| DISC-05 | Phase 2 | Complete |
| DISC-06 | Phase 2 | Complete |
| DISC-07 | Phase 2 | Complete |
| DISC-08 | Phase 2 | Complete |
| DISC-09 | Phase 2 | Complete |
| PREV-01 | Phase 2 | Complete |
| PREV-02 | Phase 2 | Complete |
| PREV-03 | Phase 2 | Complete |
| PREV-04 | Phase 2 | Complete |
| PREV-05 | Phase 2 | Complete |
| IMPRT-01 | Phase 2 | Complete |
| IMPRT-02 | Phase 2 | Complete |
| IMPRT-03 | Phase 2 | Complete |
| IMPRT-04 | Phase 2 | Complete |
| IMPRT-05 | Phase 2 | Complete |
| POPUL-01 | Phase 2 | Complete |
| POPUL-02 | Phase 2 | Complete |
| POPUL-03 | Phase 2 | Complete |
| POPUL-04 | Phase 2 | Complete |
| POPUL-05 | Phase 2 | Complete |
| POPUL-06 | Phase 2 | Complete |
| POPUL-07 | Phase 2 | Complete |
| FEED-01 | Phase 3 | Complete |
| FEED-02 | Phase 3 | Complete |
| FEED-03 | Phase 3 | Complete |
| FEED-04 | Phase 3 | Complete |
| FEED-05 | Phase 3 | Complete |
| AGENT-01 | Phase 3 | Complete |
| AGENT-02 | Phase 3 | Complete |
| AGENT-03 | Phase 3 | Complete |
| AGENT-04 | Phase 3 | Complete |
| AGENT-05 | Phase 3 | Complete |
| AGENT-06 | Phase 3 | Complete |
| CONV-01 | Phase 4 | Complete |
| CONV-02 | Phase 4 | Complete |
| CONV-03 | Phase 4 | Complete |
| CONV-04 | Phase 4 | Complete |
| CONV-05 | Phase 4 | Complete |
| SUBM-01 | Phase 4 | Complete |
| SUBM-02 | Phase 4 | Complete |
| SUBM-03 | Phase 4 | Complete |
| SUBM-04 | Phase 4 | Complete |
| SUBM-05 | Phase 4 | Complete |
| WRITE-01 | Phase 5 | Complete |
| WRITE-02 | Phase 5 | Complete |
| WRITE-03 | Phase 5 | Complete |
| WRITE-04 | Phase 5 | Complete |
| WRITE-05 | Phase 5 | Complete |
| WRITE-06 | Phase 5 | Complete |
| WRITE-07 | Phase 5 | Complete |
| AGUI-01 | Phase 6 | Complete |
| AGUI-02 | Phase 6 | Complete |
| AGUI-03 | Phase 6 | Complete |
| AGUI-04 | Phase 6 | Complete |
| AGUI-05 | Phase 6 | Complete |
| AGUI-06 | Phase 6 | Complete |
| AUTO-01 | Phase 6 | Complete |
| AUTO-02 | Phase 6 | Complete |
| AUTO-03 | Phase 6 | Complete |
| AUTO-04 | Phase 6 | Complete |
| AUTO-05 | Phase 6 | Complete |
| AUTO-06 | Phase 6 | Complete |

**Coverage:**
- v1 requirements: 76 total
- Delivered: 76
- Success rate: 100%

**Deferred to v2:**
- TMPL-01 through TMPL-07 (Template Generation) - per PROJECT.md Phase 2 scope

---

## Milestone Summary

**Shipped:** 76 of 76 v1 requirements
**Adjusted:** None - all requirements delivered as specified
**Dropped:** None - all planned requirements completed

---

*Archived: 2026-01-27 as part of v1.0 milestone completion*
*Requirements defined: 2026-01-25*
