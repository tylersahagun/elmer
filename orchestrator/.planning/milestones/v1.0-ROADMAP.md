# Milestone v1.0: Elmer Workspace Onboarding

**Status:** ✅ SHIPPED 2026-01-27
**Phases:** 1-6
**Total Plans:** 44

## Overview

This roadmap delivers workspace onboarding that discovers pm-workspace structures in GitHub repositories and auto-populates Elmer workspaces. The core transformation: users see their existing GitHub work reflected in Elmer without manual configuration.

Phases progress from wizard foundation through discovery, enhancement, advanced handling, writeback, and automation. Each phase delivers a complete capability that builds on previous work.

**Note:** Template generation (TMPL-01 through TMPL-07) is explicitly deferred to v2 per PROJECT.md constraints.

## Phases

### Phase 1: Onboarding Foundation & Repository Connection

**Goal:** User can connect a GitHub repository through a polished wizard experience with progress tracking, error recovery, and session persistence.

**Dependencies:** None (foundation phase)

**Requirements:** FOUND-01, FOUND-02, FOUND-03, FOUND-04, FOUND-05, REPO-01, REPO-02, REPO-03, REPO-04, REPO-05, SETTNG-01, SETTNG-02, SETTNG-03, SETTNG-04, TOUR-01, TOUR-02, TOUR-03, TOUR-04, TOUR-05

**Plans:** 7 plans

Plans:
- [x] 01-01-PLAN.md — Wizard foundation infrastructure (store, progress, navigation, error handling)
- [x] 01-02-PLAN.md — Repository connection steps (GitHub OAuth, repo selection, branch selection)
- [x] 01-03-PLAN.md — Settings page refactoring (edit mode, onboarding status)
- [x] 01-04-PLAN.md — Post-onboarding tour (spotlight, step definitions, restart)
- [x] 01-05-PLAN.md — Wizard integration and verification (wire steps, page route, API endpoint)
- [x] 01-06-PLAN.md — Gap closure: Step configuration sync fix
- [x] 01-07-PLAN.md — Gap closure: Tour modal z-index conflict fix

**Success Criteria:**
1. User sees current step and completion percentage throughout onboarding
2. User can skip optional steps and return later without losing progress
3. User receives clear error messages with retry buttons when GitHub operations fail
4. User selects repository from searchable list and chooses branch to scan
5. User can take optional tour after onboarding showing how components work together

**Requirement Count:** 19

---

### Phase 2: Structure Discovery & Workspace Population

**Goal:** User sees their GitHub repository structure automatically discovered, previewed, and transformed into a populated Elmer workspace.

**Dependencies:** Phase 1 (wizard infrastructure, repo connection)

**Requirements:** DISC-01, DISC-02, DISC-03, DISC-04, DISC-05, DISC-06, DISC-07, DISC-08, DISC-09, PREV-01, PREV-02, PREV-03, PREV-04, PREV-05, IMPRT-01, IMPRT-02, IMPRT-03, IMPRT-04, IMPRT-05, POPUL-01, POPUL-02, POPUL-03, POPUL-04, POPUL-05, POPUL-06, POPUL-07

**Plans:** 9 plans

Plans:
- [x] 02-01-PLAN.md — Core discovery engine (pattern matching, meta parsing, status mapping)
- [x] 02-02-PLAN.md — Discovery types and ID generator (TypeScript types, deterministic IDs)
- [x] 02-03-PLAN.md — Repository scanner and API endpoint (tree scanning, discovery orchestration)
- [x] 02-04-PLAN.md — Preview UI foundation (column grouping, initiative display)
- [x] 02-05-PLAN.md — Selection controls (checkboxes, filters, bulk operations, discovery store)
- [x] 02-06-PLAN.md — Validation summary and confirmation (import counts, confirmation screen)
- [x] 02-07-PLAN.md — Population engine (project creation, knowledge sync, upsert)
- [x] 02-08-PLAN.md — Wizard integration (discovery step wired into wizard flow)
- [x] 02-09-PLAN.md — Verification and polish (end-to-end testing checkpoint)

**Success Criteria:**
1. User sees discovered folders ranked by confidence (initiatives/ detected before generic work/)
2. User previews mapping before import ("initiatives/feature-a -> Project 'Feature A' in Discovery stage")
3. User selects which initiatives to import via checkboxes with bulk select/deselect
4. User sees validation summary ("This will create 12 projects, sync 24 knowledge docs, import 5 personas")
5. After confirmation, user sees projects populated in Kanban columns based on _meta.json status

**Requirement Count:** 26

---

### Phase 3: Real-time Feedback & Agent Import

**Goal:** User experiences responsive discovery with streaming progress updates and automatic agent architecture import.

**Dependencies:** Phase 2 (discovery logic to stream, agents to import)

**Requirements:** FEED-01, FEED-02, FEED-03, FEED-04, FEED-05, AGENT-01, AGENT-02, AGENT-03, AGENT-04, AGENT-05, AGENT-06

**Plans:** 7 plans

Plans:
- [x] 03-01-PLAN.md — SSE streaming infrastructure (types, utilities, stream endpoint)
- [x] 03-02-PLAN.md — Agent preview UI components (AgentItem, AgentPreview)
- [x] 03-03-PLAN.md — Streaming scanner integration (progress callbacks, real-time events)
- [x] 03-04-PLAN.md — Agent selection controls (store actions, selection UI in discovery step)
- [x] 03-05-PLAN.md — Streaming discovery hook and progress UI (useStreamingDiscovery, cancel support)
- [x] 03-06-PLAN.md — Agent import verification (population engine, sync, database records)
- [x] 03-07-PLAN.md — End-to-end verification (all FEED-XX and AGENT-XX requirements)

**Success Criteria:**
1. User sees live progress updates during discovery ("Scanning... Found initiatives/ ... Analyzing 15 folders...")
2. User sees discovered items appear incrementally as they are found
3. User can cancel long-running discovery operations
4. User sees detected .cursor/ commands and agents in preview before import
5. Imported agents are configured and ready to execute in workspace

**Requirement Count:** 11

---

### Phase 4: Conversational Discovery & Submodule Support

**Goal:** User navigates ambiguous repository structures through conversational Q&A and accesses content in Git submodules.

**Dependencies:** Phase 2 (core discovery), Phase 3 (streaming for submodule scan)

**Requirements:** CONV-01, CONV-02, CONV-03, CONV-04, CONV-05, SUBM-01, SUBM-02, SUBM-03, SUBM-04, SUBM-05

**Plans:** 7 plans

Plans:
- [x] 04-01-PLAN.md — Ambiguity detection (detect multiple folders, status mapping conflicts)
- [x] 04-02-PLAN.md — Submodule detection (parse .gitmodules, identify submodules)
- [x] 04-03-PLAN.md — Conversation types and store (Q&A state, answer history, revision)
- [x] 04-04-PLAN.md — Submodule scanning (extend scanner, streaming events, prototype paths)
- [x] 04-05-PLAN.md — Conversation UI components (ConversationPanel, QuestionCard)
- [x] 04-06-PLAN.md — Submodule preview UI (SubmodulePreview, SubmoduleItem)
- [x] 04-07-PLAN.md — Integration and verification (wire into DiscoveryStep, e2e test)

**Success Criteria:**
1. When structure is ambiguous, user sees clarifying question ("I found /features/ and /work/. Which contains your initiatives?")
2. User answers questions in chat-like interface and can revise previous answers
3. User sees Git submodules detected and scanned for additional content
4. User sees submodule paths in visual preview ("elephant-ai/web/src/components/prototypes/")
5. Workspace correctly handles prototype generation in submodule paths

**Requirement Count:** 10

---

### Phase 5: GitHub Writeback

**Goal:** Work created in Elmer (PRDs, prototypes, document updates) appears in the GitHub repository via atomic commits.

**Dependencies:** Phase 2 (populated workspace to write from)

**Requirements:** WRITE-01, WRITE-02, WRITE-03, WRITE-04, WRITE-05, WRITE-06, WRITE-07

**Plans:** 5 plans

Plans:
- [x] 05-01-PLAN.md — Writeback service layer (types, path resolver, commit service)
- [x] 05-02-PLAN.md — Project commits schema (migration, queries, history tracking)
- [x] 05-03-PLAN.md — PRD writeback integration (prd, design brief, eng spec, gtm brief)
- [x] 05-04-PLAN.md — Prototype writeback integration (prototype notes, submodule paths)
- [x] 05-05-PLAN.md — Commit history UI and verification (API, component, e2e test)

**Success Criteria:**
1. When user creates a PRD, it appears in GitHub repo at configured path with atomic commit
2. When user creates a prototype, it commits to repo including submodule paths
3. All Elmer-generated commits use atomic pattern with descriptive messages
4. User can see commit history for each project showing all Elmer-generated commits
5. All work created in Elmer exists in GitHub repo, not just Elmer database

**Requirement Count:** 7

---

### Phase 6: Agents Management & Column Automation

**Goal:** User manages agent execution from a dedicated page and configures column automation that triggers on project movement.

**Dependencies:** Phase 3 (imported agents), Phase 5 (writeback for automation outputs)

**Requirements:** AGUI-01, AGUI-02, AGUI-03, AGUI-04, AGUI-05, AGUI-06, AUTO-01, AUTO-02, AUTO-03, AUTO-04, AUTO-05, AUTO-06

**Plans:** 9 plans

Plans:
- [x] 06-01-PLAN.md — Agents page and navigation (page route, agent list UI, hamburger menu link)
- [x] 06-02-PLAN.md — Agent detail display (expanded view, metadata parsing, skill/command details)
- [x] 06-03-PLAN.md — Agent execution from page (context selector, execution panel)
- [x] 06-04-PLAN.md — Execution history (history API, history component)
- [x] 06-05-PLAN.md — Enable/disable agents (toggle control, database field)
- [x] 06-06-PLAN.md — Column automation configuration (settings card, automation rules editor)
- [x] 06-07-PLAN.md — Automation trigger on drag (automation service, loop prevention)
- [x] 06-08-PLAN.md — Automation status badge (inline status on project cards)
- [x] 06-09-PLAN.md — End-to-end verification (all AGUI and AUTO requirements)

**Success Criteria:**
1. User navigates to Agents page and sees all detected/imported agents with descriptions
2. User can select projects or signals as context and execute agents from the page
3. User configures which automations run when projects are dragged to each column
4. When project is dragged to column, configured auto-runs execute automatically
5. User sees automation execution status and results inline on project card

**Requirement Count:** 12

---

## Progress

| Phase | Name | Requirements | Status |
|-------|------|--------------|--------|
| 1 | Onboarding Foundation & Repository Connection | 19 | Complete |
| 2 | Structure Discovery & Workspace Population | 26 | Complete |
| 3 | Real-time Feedback & Agent Import | 11 | Complete |
| 4 | Conversational Discovery & Submodule Support | 10 | Complete |
| 5 | GitHub Writeback | 7 | Complete |
| 6 | Agents Management & Column Automation | 12 | Complete |

**Total:** 76 requirements across 6 phases - **ALL COMPLETE**

---

## Deferred to v2

The following requirements are explicitly deferred per PROJECT.md constraints:

- **TMPL-01 through TMPL-07** (Template Generation): Creating pm-workspace folder structure for repos without existing structure. Users without existing pm-workspace structure will see empty discovery results in v1.

---

## Milestone Summary

**Key Decisions:**

- Mode yolo with workflow toggles (research, plan_check, verifier all disabled)
- Commit planning docs enabled (default true)
- Quality model profile (opus for planner/executor, sonnet for checker)
- Wave-based parallel execution across all 6 phases
- Atomic commits per task with docs commits per plan
- Gap closure plans (01-06, 01-07) added during Phase 1 verification

**Issues Resolved:**

- Tour modal z-index conflict fixed in Phase 1
- Step configuration sync issue resolved in Phase 1
- Type errors and build blockers fixed throughout execution
- Missing UI components (Skeleton, SimpleNavbar export) added as blocking fixes

**Technical Achievements:**

- 44 plans executed across 6 phases
- 211 files modified with +48,976 insertions
- ~98,000 LOC TypeScript codebase
- 2-day execution timeline (2026-01-25 → 2026-01-27)
- All 76 v1.0 requirements delivered and verified

---

_Archived: 2026-01-27_
_For current project status, see .planning/ROADMAP.md (will be created for next milestone)_
