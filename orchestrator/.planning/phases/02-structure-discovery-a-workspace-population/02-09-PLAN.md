---
phase: 02-structure-discovery-a-workspace-population
plan: 09
type: execute
wave: 5
depends_on: ["02-08"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "End-to-end flow works: connect repo -> select branch -> discover -> import -> see projects"
    - "Projects appear in correct Kanban columns based on status mapping"
    - "Re-onboarding updates existing projects without duplicates"
    - "Empty state handled gracefully when no initiatives found"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete discovery and population flow with human testing.

Purpose: Ensure the entire Phase 2 implementation works end-to-end with real GitHub repositories before marking the phase complete.

Output: Verified working discovery flow with documented test results.
</objective>

<execution_context>
@/Users/tylersahagun/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tylersahagun/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-CONTEXT.md

# All prior summaries for context
@.planning/phases/02-structure-discovery-a-workspace-population/02-01-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-02-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-03-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-04-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-05-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-06-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-07-SUMMARY.md
@.planning/phases/02-structure-discovery-a-workspace-population/02-08-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run all unit tests</name>
  <files></files>
  <action>
Run all discovery-related tests to ensure components work correctly:

```bash
npm test -- src/lib/discovery/
npm test -- src/lib/stores/discovery-store.test.ts
```

Verify all tests pass. If any fail, fix the issues before proceeding to manual testing.
  </action>
  <verify>
All tests pass with no failures
  </verify>
  <done>All unit tests pass</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete discovery and import flow:
- Repository scanning with pattern matching
- _meta.json parsing with status extraction
- Status to column mapping with fuzzy matching
- Preview UI with column grouping
- Selection controls with filters
- Validation summary with import counts
- Population engine with project creation
- Wizard integration with discovery step
  </what-built>
  <how-to-verify>
**Test 1: Happy Path (repo with initiatives)**

1. Start dev server: `npm run dev`
2. Create a new workspace
3. Navigate to onboarding: `/workspace/{id}/onboarding`
4. Complete GitHub connection
5. Select a repository that has an `initiatives/` folder with subfolders
6. Select branch and continue
7. Verify discovery step appears with:
   - [ ] Loading spinner while scanning
   - [ ] Preview showing initiatives grouped by column
   - [ ] Validation summary at top showing counts
   - [ ] Filter bar with column/source/archived options
   - [ ] Select All / Deselect All buttons
   - [ ] Checkboxes on each initiative
8. Toggle some selections, apply filters - verify they work
9. Click "Import X projects"
10. Verify:
    - [ ] Import completes successfully
    - [ ] Wizard advances to complete step
    - [ ] Projects appear in Kanban board
    - [ ] Projects in correct columns based on _meta.json status

**Test 2: Empty State (repo without initiatives)**

1. Create another workspace
2. Select a repository without initiatives folder
3. Verify:
    - [ ] Discovery shows "No initiatives found" message
    - [ ] Skip/continue option available
    - [ ] Can complete onboarding without error

**Test 3: Re-onboarding (idempotency)**

1. Go to workspace settings
2. Click "Re-run discovery" (or trigger via API)
3. Verify:
    - [ ] Same projects shown in preview
    - [ ] Import updates existing projects (not duplicates)
    - [ ] Check database: project count unchanged

**Test 4: Edge Cases**

- [ ] Initiative with missing _meta.json uses folder name
- [ ] Initiative with malformed _meta.json shows in warnings
- [ ] Ambiguous status (e.g., 'dev-ready') shows warning icon
- [ ] Dynamic column name preserved (e.g., 'Beta Testing')
  </how-to-verify>
  <resume-signal>
Report test results:
- List any failing tests with details
- Note any UI/UX issues
- Confirm "approved" if all tests pass
  </resume-signal>
</task>

<task type="auto">
  <name>Task 2: Address any issues from testing</name>
  <files></files>
  <action>
If the human verification revealed issues:

1. Document each issue
2. Create fixes for blocking issues
3. Non-blocking issues can be tracked for follow-up

If all tests passed, skip this task - just acknowledge "No issues to address".
  </action>
  <verify>
All blocking issues resolved
  </verify>
  <done>Issues addressed or no issues found</done>
</task>

</tasks>

<verification>
Phase 2 is complete when:
1. All unit tests pass
2. Human verification tests pass
3. End-to-end flow works with real repository
4. Projects populate in correct columns
5. Re-onboarding is idempotent
</verification>

<success_criteria>
- DISC-01 through DISC-09: Discovery requirements verified
- PREV-01 through PREV-05: Preview requirements verified
- IMPRT-01 through IMPRT-05: Import requirements verified
- POPUL-01 through POPUL-07: Population requirements verified
</success_criteria>

<output>
After completion, create `.planning/phases/02-structure-discovery-a-workspace-population/02-09-SUMMARY.md`

Then update:
- .planning/STATE.md with Phase 2 completion
- .planning/ROADMAP.md to mark Phase 2 as Complete
</output>
