---
phase: 06-agents-management-a-column-automation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(dashboard)/workspace/[id]/agents/page.tsx
  - src/components/agents/AgentsList.tsx
  - src/components/agents/AgentCard.tsx
  - src/components/agents/index.ts
  - src/components/chrome/Navbar.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to Agents page via hamburger menu"
    - "User sees list of all detected/imported agents with descriptions"
    - "Agents are grouped by type (agents_md, skill, command, subagent, rule)"
  artifacts:
    - path: "src/app/(dashboard)/workspace/[id]/agents/page.tsx"
      provides: "Agents page route"
      exports: ["default"]
    - path: "src/components/agents/AgentsList.tsx"
      provides: "Agent list with type grouping"
      exports: ["AgentsList"]
    - path: "src/components/agents/AgentCard.tsx"
      provides: "Individual agent display card"
      exports: ["AgentCard"]
  key_links:
    - from: "src/components/chrome/Navbar.tsx"
      to: "/workspace/[id]/agents"
      via: "Link in hamburger menu"
      pattern: "href.*agents"
    - from: "src/app/(dashboard)/workspace/[id]/agents/page.tsx"
      to: "/api/agents"
      via: "useQuery fetch"
      pattern: "fetch.*api/agents"
---

<objective>
Create the Agents page accessible via hamburger menu that displays all detected/imported agents grouped by type.

Purpose: Users need a dedicated page to see and manage all agents imported from their GitHub repository during onboarding (AGUI-01, AGUI-02).

Output: Agents page with list UI showing agent name, type, description, and grouped sections.
</objective>

<execution_context>
@/Users/tylersahagun/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tylersahagun/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing patterns
@src/components/chrome/Navbar.tsx
@src/app/api/agents/route.ts
@src/lib/db/schema.ts (agentDefinitions table)
@src/lib/db/queries.ts (listAgentDefinitions)
@src/components/discovery/AgentPreview.tsx (styling reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Agents page route</name>
  <files>src/app/(dashboard)/workspace/[id]/agents/page.tsx</files>
  <action>
Create the Agents page as a server component that:
1. Extracts workspaceId from params
2. Uses SimpleNavbar with path "~/agents"
3. Renders AgentsList client component with workspaceId prop
4. Follow existing page patterns from workspace/[id]/page.tsx

Structure:
```tsx
import { SimpleNavbar } from "@/components/chrome";
import { AgentsList } from "@/components/agents";

export default async function AgentsPage({ params }: { params: Promise<{ id: string }> }) {
  const { id: workspaceId } = await params;
  // Render SimpleNavbar + AgentsList
}
```
  </action>
  <verify>File exists and exports default function</verify>
  <done>Agents page route exists at /workspace/[id]/agents</done>
</task>

<task type="auto">
  <name>Task 2: Create agent components</name>
  <files>
    src/components/agents/AgentCard.tsx
    src/components/agents/AgentsList.tsx
    src/components/agents/index.ts
  </files>
  <action>
Create agent UI components:

**AgentCard.tsx:**
- Props: agent (from agentDefinitions), onExecute callback
- Display: name, type badge (use semantic colors from AgentItem.tsx pattern), description, source path
- Type badge colors: Purple (agents_md), blue (skill), green (command), orange (subagent), gray (rule)
- Source path shown in muted text
- Clickable card that expands to show full content

**AgentsList.tsx:**
- Client component with "use client"
- Props: workspaceId
- Fetch agents using useQuery to /api/agents?workspaceId={id}
- Group agents by type using useMemo
- Display sections: "AGENTS.md" (if exists), "Skills", "Commands", "Subagents", "Rules"
- Empty sections hidden
- Loading state with skeleton
- Empty state: "No agents imported. Connect a repository with .cursor/ configuration."

**index.ts:**
- Export AgentCard, AgentsList
  </action>
  <verify>npm run build passes without errors</verify>
  <done>Agent components exist and render agent list grouped by type</done>
</task>

<task type="auto">
  <name>Task 3: Add Agents link to hamburger menu</name>
  <files>src/components/chrome/Navbar.tsx</files>
  <action>
Add Agents navigation item to SimpleNavbar hamburger menu:
1. Add state check: `const isAgentsActive = pathname?.includes("/agents");`
2. Add Link after signals link (before settings):
```tsx
<Link href={`/workspace/${workspaceId}/agents`} className="w-full">
  <DropdownMenuItem className={cn("gap-2 font-mono text-sm", isAgentsActive && "bg-accent")}>
    <span className="text-emerald-500">$</span>
    <span>run</span>
    <span className="text-muted-foreground">agents</span>
  </DropdownMenuItem>
</Link>
```
3. Place inside the workspaceId conditional block
  </action>
  <verify>Navigate to workspace, open hamburger menu, see "run agents" option</verify>
  <done>Hamburger menu includes link to Agents page</done>
</task>

</tasks>

<verification>
1. Navigate to /workspace/[id]/agents - page loads
2. Open hamburger menu - "run agents" link visible
3. Click agents link - navigates to agents page
4. Page shows grouped agents from workspace
5. No TypeScript or build errors
</verification>

<success_criteria>
- AGUI-01: User can navigate to Agents page via hamburger menu
- AGUI-02: Agents page shows list of all detected/imported agents with their descriptions
- Agents grouped by type with semantic badge colors
- Empty state shows helpful message
</success_criteria>

<output>
After completion, create `.planning/phases/06-agents-management-a-column-automation/06-01-SUMMARY.md`
</output>
