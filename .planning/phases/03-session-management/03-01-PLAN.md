# Plan 03-01: Login Page with Email/Password

## Frontmatter

```yaml
plan_id: "03-01"
phase: 3
wave: 1
depends_on: ["02-01"]
files_modified:
  - orchestrator/src/app/login/page.tsx
  - orchestrator/src/app/api/auth/[...nextauth]/route.ts
autonomous: true
estimated_duration: "20 minutes"
```

## Objective

Create a login page that allows users to sign in with email/password credentials. The page should match the signup page styling and provide clear error feedback.

## Context

**Phase 2 established:**
- Credentials provider configured in auth.ts
- Signup page created with form styling
- Google icon component available

**This plan adds:**
- Login page at /login
- Auth.js route handler
- Error handling for invalid credentials

## Tasks

<task id="1" name="Create Auth.js Route Handler">
<description>
Create the NextAuth.js API route handler to process authentication requests.
</description>
<files>
- orchestrator/src/app/api/auth/[...nextauth]/route.ts
</files>
<instructions>
1. Create `orchestrator/src/app/api/auth/[...nextauth]/route.ts`
2. Import and export handlers from auth.ts:

```typescript
import { handlers } from "@/auth"

export const { GET, POST } = handlers
```

This enables:
- GET /api/auth/signin - Auth.js signin page (we override with /login)
- GET /api/auth/signout - Auth.js signout
- POST /api/auth/callback/credentials - Credentials login
- POST /api/auth/callback/google - Google OAuth callback
</instructions>
<verification>
- [ ] Route file exists at correct path
- [ ] Exports GET and POST handlers
- [ ] No TypeScript errors
</verification>
</task>

<task id="2" name="Create Login Page">
<description>
Create the login page with email/password form matching signup page styling.
</description>
<files>
- orchestrator/src/app/login/page.tsx
</files>
<instructions>
1. Create `orchestrator/src/app/login/page.tsx` as a client component
2. Use same Card layout as signup page
3. Include:
   - Email input field
   - Password input field
   - "Sign in" submit button
   - Google OAuth button (conditional, same as signup)
   - Link to signup page
   - Error message display
4. Use `signIn("credentials")` from next-auth/react for form submission
5. Handle error query parameter from Auth.js redirects
6. Redirect to "/" on successful login
</instructions>
<verification>
- [ ] Login page renders at /login
- [ ] Form matches signup page styling
- [ ] Error messages display for invalid credentials
- [ ] Successful login redirects to home
- [ ] Link to signup page works
</verification>
</task>

## Verification Criteria

After all tasks complete, verify:

1. **Route handler works:**
   - Navigate to /api/auth/providers
   - Should return JSON with credentials provider

2. **Login form works:**
   - Navigate to /login
   - Enter valid credentials from signup test
   - Should redirect to home

3. **Error handling works:**
   - Enter invalid credentials
   - Should show error message

4. **Navigation works:**
   - Click "Create account" link
   - Should navigate to /signup

## must_haves

- [ ] User can enter email and password on /login
- [ ] Valid credentials redirect to home page
- [ ] Invalid credentials show error message
- [ ] Google OAuth button shows when configured

---
*Plan 03-01 | Phase 3 | Wave 1*
