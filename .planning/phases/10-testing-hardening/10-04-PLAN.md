# Plan 10-04: Migration Script Tests

## Metadata

```yaml
plan_id: "10-04"
phase: 10
wave: 1
depends_on: ["10-03"]
files_modified:
  - orchestrator/src/__tests__/migrations.test.ts
autonomous: true
estimated_duration: "20 minutes"
```

## Goal

Create tests for migration scripts to ensure idempotency and correctness.

## Tasks

### Task 1: Create migration tests

**File**: `orchestrator/src/__tests__/migrations.test.ts`

Create tests for:
- assignOrphanedWorkspaces idempotency
- assignOrphanedWorkspaces assigns to first user
- backfillActors updates stage transitions
- backfillActors creates activity logs
- Multiple runs produce same result

**Acceptance Criteria**:
- [ ] Idempotency tests pass
- [ ] Correctness tests pass
- [ ] Migration result format tests pass
