---
phase: 12.5-manual-association
plan: 03
subsystem: ui
tags: [react, tanstack-query, drizzle, signals, badges]

# Dependency graph
requires:
  - phase: 12.5-01
    provides: signal-project and signal-persona junction table schemas
provides:
  - Signal table displays linked projects and personas via badges
  - getSignals includes linkedProjects and linkedPersonas arrays
  - personaId filter for browsing signals by persona
affects: [12.5-02, 13-ai-classification, 14-project-signals-panel]

# Tech tracking
tech-stack:
  added: []
  patterns: [AssociationBadge generic component for linked entity display]

key-files:
  created: []
  modified:
    - orchestrator/src/lib/db/queries.ts
    - orchestrator/src/app/api/signals/route.ts
    - orchestrator/src/components/signals/SignalRow.tsx
    - orchestrator/src/components/signals/SignalsTable.tsx

key-decisions:
  - "Project badges navigate to project page in new tab"
  - "Persona badges display personaId (no name lookup for MVP)"
  - "Show first item with +N count for multiple associations"
  - "Empty associations show '-' placeholder"

patterns-established:
  - "AssociationBadge: Generic component for displaying linked entity badges with count overflow"

# Metrics
duration: 6min
completed: 2026-01-22
---

# Phase 12.5 Plan 03: Badge Visibility Summary

**Signal table displays project and persona badges for at-a-glance association status during scanning**

## Performance

- **Duration:** 6 min
- **Started:** 2026-01-22T23:45:49Z
- **Completed:** 2026-01-22T23:52:12Z
- **Tasks:** 3
- **Files modified:** 4

## Accomplishments
- Extended getSignals to include linkedProjects and linkedPersonas arrays with each signal
- Added personaId filter to support persona-based signal browsing
- Created AssociationBadge generic component for consistent badge display
- Signals table now shows Projects and Personas columns with clickable badges

## Task Commits

Each task was committed atomically:

1. **Task 1: Extend getSignals to include linked project/persona data** - `7a6b2d6` (feat)
2. **Task 2: Extend SignalRow with project and persona badges** - `78ae6a4` (feat)
3. **Task 3: Update SignalsTable header to include new columns** - `bd48f22` (feat)

## Files Created/Modified
- `orchestrator/src/lib/db/queries.ts` - Extended getSignals with relation fetching and personaId filter
- `orchestrator/src/app/api/signals/route.ts` - Added personaId query param support
- `orchestrator/src/components/signals/SignalRow.tsx` - Added AssociationBadge component and project/persona columns
- `orchestrator/src/components/signals/SignalsTable.tsx` - Added Projects and Personas column headers

## Decisions Made
- Project badges are blue (`bg-blue-500/20`) and open project page in new tab when clicked
- Persona badges are violet (`bg-violet-500/20`) and display the raw personaId
- When multiple associations exist, show first badge with "+N" count indicator
- Empty associations display "-" placeholder for visual consistency

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
- Next.js build had transient filesystem errors (ENOENT on build manifest) - worked around by using tsc for type checking instead of full build

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness
- Badge visibility complete, provenance chain now visible at a glance
- Ready for 12.5-02 association UI integration (modal link/unlink)
- Persona filtering enables "show me all signals for Enterprise Admin" use case

---
*Phase: 12.5-manual-association*
*Completed: 2026-01-22*
