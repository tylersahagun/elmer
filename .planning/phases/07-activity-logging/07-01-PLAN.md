# Plan 07-01: Activity Service with Logging Functions

## Metadata

```yaml
plan_id: "07-01"
phase: 7
wave: 1
depends_on: ["06-03"]
files_modified:
  - orchestrator/src/lib/activity.ts
  - orchestrator/src/lib/db/queries.ts
autonomous: true
estimated_duration: "15 minutes"
```

## Goal

Create a reusable activity logging service that can record workspace events with actor, target, and metadata.

## Tasks

### Task 1: Create activity service

**File**: `orchestrator/src/lib/activity.ts`

Create activity logging functions:
- `logActivity(workspaceId, userId, action, target?, metadata?)` - Generic log function
- Typed action constants for common operations
- Helper functions for specific action types

**Acceptance Criteria**:
- [ ] Activity service exports `logActivity` function
- [ ] Action types are defined as constants
- [ ] Function handles optional target and metadata
- [ ] Returns created activity log entry

### Task 2: Add query function for fetching activity logs

**File**: `orchestrator/src/lib/db/queries.ts`

Add:
- `getWorkspaceActivityLogs(workspaceId, options?)` - Fetch recent activity with pagination

**Acceptance Criteria**:
- [ ] Query function exists and returns activity logs
- [ ] Supports limit/offset pagination
- [ ] Includes user information in results
